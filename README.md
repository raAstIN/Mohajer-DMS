# سیستم مدیریت پرونده مهاجر (Mohajer DMS)

این پروژه یک سیستم مدیریت پرونده (DMS) دسکتاپ برای ثبت و نگهداری اطلاعات قراردادها و پرونده‌های حقوقی است. این برنامه با استفاده از پایتون و رابط گرافیکی مدرن **CustomTkinter** توسعه داده شده و از پایگاه داده **SQLite** برای ذخیره‌سازی اطلاعات بهره می‌برد.

---

## ✨ ویژگی‌های کلیدی

- **مدیریت کامل پرونده‌ها**: ایجاد، ویرایش، مشاهده جزئیات، جستجو و حذف پرونده‌ها.
- **پشتیبانی از انواع قرارداد**: امکان ثبت پرونده‌ها با انواع مختلف مانند «اجاره»، «پیمانکاری» و... با فیلدهای اختصاصی برای هرکدام (مانند موجر/مستاجر یا کارفرما/پیمانکار).
- **شناسه یکتای شمسی**: هر پرونده یک شناسه منحصر به فرد بر اساس تاریخ و زمان شمسی دریافت می‌کند که خوانایی و پیگیری را آسان می‌کند.
- **مدیریت پیوست‌ها**: برای هر پرونده یک پوشه مجزا جهت آپلود و نگهداری فایل‌های مربوطه (مانند اسکن قرارداد، مدارک و...) به صورت خودکار ایجاد می‌شود.
- **پشتیبان‌گیری خودکار**: پس از هر عملیات ثبت، ویرایش یا حذف، یک نسخه پشتیبان از کل پایگاه داده به صورت خودکار با برچسب زمان شمسی در پوشه `backup` ذخیره می‌شود.
- **جستجوی پیشرفته**: قابلیت جستجو بر اساس فیلدهای مختلفی چون «شناسه»، «عنوان»، «موضوع»، «تاریخ» و «نوع پرونده» و همچنین جستجوی کامل در تمام اطلاعات متنی.
- **رابط کاربری مدرن**: استفاده از کتابخانه `CustomTkinter` برای ظاهری زیبا و کاربرپسند.
- **تقویم شمسی**: بهره‌گیری از `jdatetime` برای کار با تاریخ‌های شمسی.

## 🛠️ تکنولوژی‌های استفاده شده

- **زبان برنامه‌نویسی**: Python 3.10+
- **پایگاه داده**: SQLite 3
- **رابط کاربری گرافیکی (GUI)**:
  - `CustomTkinter` (برای ظاهر مدرن)
  - `Pillow` (برای کار با تصاویر و آیکن‌ها)
- **مدیریت تاریخ شمسی**:
  - `jdatetime` (برای منطق تاریخ و تولید شناسه یکتا)

## 🚀 نصب و اجرا

برای اجرای برنامه، مراحل زیر را دنبال کنید:

۱. **کلون کردن پروژه (اختیاری)**
   اگر از Git استفاده می‌کنید، پروژه را کلون کنید:
   ```bash
   git clone <repository-url>
   cd Mohajer-DMS
   ```

۲. **ایجاد و فعال‌سازی محیط مجازی**
   توصیه می‌شود که از یک محیط مجازی پایتون استفاده کنید.
   ```bash
   # در ویندوز
   python -m venv .venv
   .venv\Scripts\activate

   # در macOS/Linux
   python -m venv .venv
   source .venv/bin/activate
   ```

۳. **نصب وابستگی‌ها**
   بسته‌های مورد نیاز را با استفاده از فایل `requirements.txt` نصب کنید:
   ```bash
   pip install -r requirements.txt
   ```

۴. **اجرای برنامه**
   فایل اصلی برنامه را اجرا کنید. با اولین اجرا، ساختار پوشه‌ها و فایل پایگاه داده به صورت خودکار ایجاد می‌شود.
   ```bash
   python main.py
   ```

## 📂 ساختار پروژه
```bash
Mohajer-DMS/
├── main.py                # نقطه ورود و اجرای برنامه
├── database.py            # مدیریت کامل عملیات پایگاه داده (CRUD، جستجو، پشتیبان‌گیری)
├── ui/                    # ماژول‌های مربوط به رابط کاربری
│   ├── main_window.py     # پنجره اصلی و نمایش لیست پرونده‌ها
│   ├── add_record.py      # فرم ایجاد/ویرایش پرونده
│   ├── search_records.py  # بخش جستجو
│   └── details_window.py  # پنجره نمایش جزئیات کامل پرونده
├── files/                 # محل ذخیره‌سازی داده‌ها
│   ├── uploads/           # پوشه فایل‌های آپلود شده برای هر پرونده
│   └── backup/            # نسخه‌های پشتیبان پایگاه داده
├── assets/                # منابع استاتیک مانند آیکن‌ها
│   └── icons/
└── requirements.txt       # لیست بسته‌های مورد نیاز پروژه
```

2. اجرای برنامه:

```bash
python main.py
```

توضیحات

- دیتابیس SQLite در `files/cases.db` قرار می‌گیرد.
- هنگام ایجاد پرونده، یک شناسهٔ یکتا بر اساس تاریخ و زمان شمسی تولید می‌شود و فولدری در `files/uploads/<id>/` ساخته می‌شود.
- بعد از هر ذخیره یا حذف، از دیتابیس یک نسخه پشتیبان در `files/backup/` ایجاد می‌شود.
- برای نمایش تقویم از `tkcalendar.DateEntry` استفاده شده و برای تولید تاریخ شمسی از `jdatetime`.

توسعهٔ بیشتر

این پیاده‌سازی یک اسکلت اولیه است؛ موارد پیشنهادی بعدی:
- افزودن آیکن‌ها و بهبود استایل UI
- فیلتر پیشرفته و صفحه‌بندی نتایج
- صادرات/واردات CSV
- محافظت با رمز عبور برای بخش مدیریتی
